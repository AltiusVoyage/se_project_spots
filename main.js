!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_active"},t=(e,t,n)=>{(e=>e.some(e=>!e.validity.valid))(e)?o(t,n):(t.disabled=!1,t.classList.remove(n.inactiveButtonClass))},o=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},n=document.querySelector(".profile__edit-btn"),r=document.querySelector(".profile__add-btn"),a=document.querySelector(".profile__name"),s=document.querySelector(".profile__description"),c=document.querySelector("#edit-modal"),l=c.querySelector(".modal__form"),i=(c.querySelector(".modal__close"),c.querySelector("#profile-name-input")),d=c.querySelector("#profile-description-input"),u=(c.querySelector(".modal__submit-btn"),document.querySelector("#add-card-modal")),m=(u.querySelector(".modal__close"),u.querySelector(".modal__form")),p=u.querySelector(".modal__submit-btn"),_=u.querySelector("#add-card-name-input"),y=u.querySelector("#add-card-link-input"),f=document.querySelector("#preview-modal"),v=f.querySelector(".modal__image"),S=f.querySelector(".modal__caption"),q=(f.querySelector(".modal__close"),document.querySelector("#card-template").content.querySelector(".card")),g=document.querySelector(".cards__list");function b(e){e.target.classList.contains("modal")&&k(e.target)}function h(e){if("Escape"===e.key){const e=document.querySelector(".modal_is-opened");e&&k(e)}}function w(e){e.classList.add("modal_is-opened"),e.addEventListener("click",b),document.addEventListener("keydown",h)}function k(e){e.classList.remove("modal_is-opened"),e.removeEventListener("click",b),document.removeEventListener("keydown",h)}function L(e){const t=q.cloneNode(!0),o=t.querySelector(".card__title"),n=t.querySelector(".card__image"),r=t.querySelector(".card__like-button"),a=t.querySelector(".card__delete-button");return o.textContent=e.name,n.src=e.link,n.alt=e.name,r.addEventListener("click",()=>{r.classList.toggle("card__like-button_liked")}),a.addEventListener("click",e=>{t&&t.remove()}),n.addEventListener("click",()=>{w(f),v.src=e.link,S.textContent=e.name,v.alt=e.name}),t}n.addEventListener("click",()=>{i.value=a.textContent,d.value=s.textContent,resetValidation(l,[i,d],config),w(c)}),document.querySelectorAll(".modal__close").forEach(e=>{const t=e.closest(".modal");e.addEventListener("click",()=>k(t))}),r.addEventListener("click",()=>{w(u)}),l.addEventListener("submit",function(e){e.preventDefault(),a.textContent=i.value,s.textContent=d.value,k(c)}),m.addEventListener("submit",function(t){t.preventDefault();const o=L({name:_.value,link:y.value});g.prepend(o),t.target.reset(),disableButton(p,e),k(u)}),[{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Golden Gate bridge",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/7-photo-by-griffin-wooldridge-from-pexels.jpg"}].forEach(e=>{const t=L(e);g.append(t)}),(e=>{document.querySelectorAll(e.formSelector).forEach(o=>{((e,o)=>{const n=Array.from(e.querySelectorAll(o.inputSelector)),r=e.querySelector(o.submitButtonSelector);t(n,r,o),n.forEach(a=>{a.addEventListener("input",function(){((e,t,o)=>{t.validity.valid?((e,t,o)=>{const n=e.querySelector(`#${t.id}-error`);n.textContent="",t.classList.remove(o.errorClass),n.classList.remove(o.errorClass)})(e,t,o):((e,t,o,n)=>{const r=e.querySelector(`#${t.id}-error`);r.textContent=o,t.classList.add(n.errorClass),r.classList.add(n.errorClass)})(e,t,t.validationMessage,o)})(e,a,o),t(n,r,o)})})})(o,e)})})(e)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGlCQUFpQjNELEVBQU9ULGNBQ3pDcUUsUUFBU1UsSUFoQk1DLEVBQUNELEVBQVF0RSxLQUNqQyxNQUFNRixFQUFZMEUsTUFBTUMsS0FBS0gsRUFBT1gsaUJBQWlCM0QsRUFBT1IsZ0JBQ3RETyxFQUFXdUUsRUFBT3pELGNBQWNiLEVBQU9QLHNCQUU3Q0ksRUFBa0JDLEVBQVdDLEVBQVVDLEdBRXZDRixFQUFVOEQsUUFBU2MsSUFDakJBLEVBQVFqQyxpQkFBaUIsUUFBUyxXQXpDWGtDLEVBQUNMLEVBQVFJLEVBQVMxRSxLQUN0QzBFLEVBQVF2RSxTQUFTQyxNQVJEd0UsRUFBQ04sRUFBUUksRUFBUzFFLEtBQ3ZDLE1BQU02RSxFQUFVUCxFQUFPekQsY0FBYyxJQUFJNkQsRUFBUUksWUFDakRELEVBQVExQixZQUFjLEdBQ3RCdUIsRUFBUWxFLFVBQVVDLE9BQU9ULEVBQU9KLFlBQ2hDaUYsRUFBUXJFLFVBQVVDLE9BQU9ULEVBQU9KLGFBTzlCZ0YsQ0FBZU4sRUFBUUksRUFBUzFFLEdBbEJiK0UsRUFBQ1QsRUFBUUksRUFBU00sRUFBVWhGLEtBQ2pELE1BQU02RSxFQUFVUCxFQUFPekQsY0FBYyxJQUFJNkQsRUFBUUksWUFDakRELEVBQVExQixZQUFjNkIsRUFDdEJOLEVBQVFsRSxVQUFVRSxJQUFJVixFQUFPSixZQUM3QmlGLEVBQVFyRSxVQUFVRSxJQUFJVixFQUFPSixhQVkzQm1GLENBQWVULEVBQVFJLEVBQVNBLEVBQVFPLGtCQUFtQmpGLElBd0N6RDJFLENBQW1CTCxFQUFRSSxFQUFTMUUsR0FDcENILEVBQWtCQyxFQUFXQyxFQUFVQyxFQUN6QyxNQU9BdUUsQ0FBa0JELEVBQVF0RSxNQ2dHOUJrRixDQUFpQjVGLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3NjcmlwdHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnRuXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3N1Ym1pdC1idG5fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX2FjdGl2ZVwiLFxufTtcblxuY29uc3Qgc2hvd0lucHV0RXJyb3IgPSAoZm9ybUVsLCBpbnB1dEVsLCBlcnJvck1zZywgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yRWwgPSBmb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgZXJyb3JFbC50ZXh0Q29udGVudCA9IGVycm9yTXNnO1xuICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQoY29uZmlnLmVycm9yQ2xhc3MpO1xuICBlcnJvckVsLmNsYXNzTGlzdC5hZGQoY29uZmlnLmVycm9yQ2xhc3MpO1xufTtcblxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JFbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xuICBlcnJvckVsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5lcnJvckNsYXNzKTtcbiAgZXJyb3JFbC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5lcnJvckNsYXNzKTtcbn07XG5cbmNvbnN0IGNoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWwsIGlucHV0RWwsIGNvbmZpZykgPT4ge1xuICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcbiAgICBzaG93SW5wdXRFcnJvcihmb3JtRWwsIGlucHV0RWwsIGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2UsIGNvbmZpZyk7XG4gIH0gZWxzZSB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpO1xuICB9XG59O1xuXG5jb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XG4gIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXQpID0+IHtcbiAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xuICB9KTtcbn07XG5cbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWwsIGNvbmZpZykgPT4ge1xuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsLCBjb25maWcpO1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbkVsLmRpc2FibGVkID0gZmFsc2U7XG4gICAgYnV0dG9uRWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIH1cbn07XG5cbmNvbnN0IGRpc2FibGVCdXR0b24gPSAoYnV0dG9uRWwsIGNvbmZpZykgPT4ge1xuICBidXR0b25FbC5kaXNhYmxlZCA9IHRydWU7XG4gIGJ1dHRvbkVsLmNsYXNzTGlzdC5hZGQoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xufTtcblxuY29uc3QgcmVzZXRWYWxpZGF0aW9uID0gKGZvcm1FbCwgaW5wdXRMaXN0LCBjb25maWcpID0+IHtcbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWwsIGlucHV0RWwsIGNvbmZpZyk7XG4gIH0pO1xufTtcblxuY29uc3Qgc2V0RXZlbnRMaXN0ZW5lcnMgPSAoZm9ybUVsLCBjb25maWcpID0+IHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWwucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xuICBjb25zdCBidXR0b25FbCA9IGZvcm1FbC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbCwgY29uZmlnKTtcblxuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xuICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWwsIGlucHV0RWwsIGNvbmZpZyk7XG4gICAgICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsLCBjb25maWcpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3Rvcik7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbCkgPT4ge1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbCwgY29uZmlnKTtcbiAgfSk7XG59O1xuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7IGVuYWJsZVZhbGlkYXRpb24sIHNldHRpbmdzIH0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xuXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIlZhbCBUaG9yZW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzEtcGhvdG8tYnktbW9yaXR6LWZlbGRtYW5uLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJSZXN0YXVyYW50IHRlcnJhY2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMi1waG90by1ieS1jZWlsaW5lLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJBbiBvdXRkb29yIGNhZmVcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMy1waG90by1ieS10dWJhbnVyLWRvZ2FuLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJBIHZlcnkgbG9uZyBicmlkZ2UsIG92ZXIgdGhlIGZvcmVzdCBhbmQgdGhyb3VnaCB0aGUgdHJlZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNC1waG90by1ieS1tYXVyaWNlLWxhc2NoZXQtZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlR1bm5lbCB3aXRoIG1vcm5pbmcgbGlnaHRcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNS1waG90by1ieS12YW4tYW5oLW5ndXllbi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTW91bnRhaW4gaG91c2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNi1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkdvbGRlbiBHYXRlIGJyaWRnZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy83LXBob3RvLWJ5LWdyaWZmaW4td29vbGRyaWRnZS1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbl07XG5cbmNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ0blwiKTtcbmNvbnN0IGNhcmRNb2RhbEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ0blwiKTtcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcblxuY29uc3QgZWRpdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LW1vZGFsXCIpO1xuY29uc3QgZWRpdEZvcm0gPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGVkaXRNb2RhbENsb3NlQnRuID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuY29uc3QgZWRpdE1vZGFsTmFtZUlucHV0ID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lLWlucHV0XCIpO1xuY29uc3QgZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dCA9IGVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5jb25zdCBlZGl0TW9kYWxTdWJtaXRCdG4gPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ0blwiKTtcblxuY29uc3QgY2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1tb2RhbFwiKTtcbmNvbnN0IGNhcmRNb2RhbENsb3NlQnRuID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuY29uc3QgY2FyZEZvcm0gPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IGNhcmRTdWJtaXRCdG4gPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ0blwiKTtcbmNvbnN0IGNhcmROYW1lSW5wdXQgPSBjYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1uYW1lLWlucHV0XCIpO1xuY29uc3QgY2FyZExpbmtJbnB1dCA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWxpbmstaW5wdXRcIik7XG5cbmNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbEltYWdlRWwgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG5jb25zdCBwcmV2aWV3TW9kYWxDYXB0aW9uRWwgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2FwdGlvblwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbENsb3NlID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuXG5jb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudFxuICAucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpXG4gIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKTtcbmNvbnN0IGNhcmRzTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5cbmZ1bmN0aW9uIGNsb3NlT3ZlcmxheShldnQpIHtcbiAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxcIikpIHtcbiAgICBjbG9zZU1vZGFsKGV2dC50YXJnZXQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUVzYyhldnQpIHtcbiAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICBjb25zdCBvcGVuTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX2lzLW9wZW5lZFwiKTtcbiAgICBpZiAob3Blbk1vZGFsKSB7XG4gICAgICBjbG9zZU1vZGFsKG9wZW5Nb2RhbCk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfaXMtb3BlbmVkXCIpO1xuICBtb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VPdmVybGF5KTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjKTtcbn1cblxuZnVuY3Rpb24gY2xvc2VNb2RhbChtb2RhbCkge1xuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfaXMtb3BlbmVkXCIpO1xuICBtb2RhbC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xvc2VPdmVybGF5KTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlRWRpdEZvcm1TdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IGVkaXRNb2RhbE5hbWVJbnB1dC52YWx1ZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dC52YWx1ZTtcbiAgY2xvc2VNb2RhbChlZGl0TW9kYWwpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3QgdmFsdWVzID0geyBuYW1lOiBjYXJkTmFtZUlucHV0LnZhbHVlLCBsaW5rOiBjYXJkTGlua0lucHV0LnZhbHVlIH07XG4gIGNvbnN0IGNhcmRFbCA9IGdldENhcmRFbGVtZW50KHZhbHVlcyk7XG4gIGNhcmRzTGlzdC5wcmVwZW5kKGNhcmRFbCk7XG4gIGV2dC50YXJnZXQucmVzZXQoKTtcbiAgZGlzYWJsZUJ1dHRvbihjYXJkU3VibWl0QnRuLCBzZXR0aW5ncyk7XG4gIGNsb3NlTW9kYWwoY2FyZE1vZGFsKTtcbn1cblxuZnVuY3Rpb24gZ2V0Q2FyZEVsZW1lbnQoZGF0YSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gIGNvbnN0IGNhcmRUaXRsZUVsID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgY29uc3QgY2FyZEltYWdlRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICBjb25zdCBjYXJkTGlrZUJ0biA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gIGNvbnN0IGNhcmREZWxldGUgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XG5cbiAgY2FyZFRpdGxlRWwudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gIGNhcmRJbWFnZUVsLnNyYyA9IGRhdGEubGluaztcbiAgY2FyZEltYWdlRWwuYWx0ID0gZGF0YS5uYW1lO1xuXG4gIGNhcmRMaWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2FyZExpa2VCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2xpa2VkXCIpO1xuICB9KTtcblxuICBjYXJkRGVsZXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgaWYgKGNhcmRFbGVtZW50KSB7XG4gICAgICBjYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNhcmRJbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgb3Blbk1vZGFsKHByZXZpZXdNb2RhbCk7XG4gICAgcHJldmlld01vZGFsSW1hZ2VFbC5zcmMgPSBkYXRhLmxpbms7XG4gICAgcHJldmlld01vZGFsQ2FwdGlvbkVsLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHByZXZpZXdNb2RhbEltYWdlRWwuYWx0ID0gZGF0YS5uYW1lO1xuICB9KTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGVkaXRNb2RhbE5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xuICBlZGl0TW9kYWxEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xuICByZXNldFZhbGlkYXRpb24oXG4gICAgZWRpdEZvcm0sXG4gICAgW2VkaXRNb2RhbE5hbWVJbnB1dCwgZWRpdE1vZGFsRGVzY3JpcHRpb25JbnB1dF0sXG4gICAgY29uZmlnXG4gICk7XG4gIG9wZW5Nb2RhbChlZGl0TW9kYWwpO1xufSk7XG5cbmNvbnN0IGNsb3NlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2Nsb3NlXCIpO1xuXG5jbG9zZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gIGNvbnN0IHBvcHVwID0gYnV0dG9uLmNsb3Nlc3QoXCIubW9kYWxcIik7XG4gIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2xvc2VNb2RhbChwb3B1cCkpO1xufSk7XG5cbmNhcmRNb2RhbEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBvcGVuTW9kYWwoY2FyZE1vZGFsKTtcbn0pO1xuXG5lZGl0Rm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUVkaXRGb3JtU3VibWl0KTtcbmNhcmRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQWRkQ2FyZFN1Ym1pdCk7XG5cbmluaXRpYWxDYXJkcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoaXRlbSk7XG4gIGNhcmRzTGlzdC5hcHBlbmQoY2FyZEVsZW1lbnQpO1xufSk7XG5cbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuIl0sIm5hbWVzIjpbInNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0TGlzdCIsImJ1dHRvbkVsIiwiY29uZmlnIiwic29tZSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhc0ludmFsaWRJbnB1dCIsImRpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsInByb2ZpbGVFZGl0QnV0dG9uIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2FyZE1vZGFsQnRuIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlRGVzY3JpcHRpb24iLCJlZGl0TW9kYWwiLCJlZGl0Rm9ybSIsImVkaXRNb2RhbE5hbWVJbnB1dCIsImVkaXRNb2RhbERlc2NyaXB0aW9uSW5wdXQiLCJjYXJkTW9kYWwiLCJjYXJkRm9ybSIsImNhcmRTdWJtaXRCdG4iLCJjYXJkTmFtZUlucHV0IiwiY2FyZExpbmtJbnB1dCIsInByZXZpZXdNb2RhbCIsInByZXZpZXdNb2RhbEltYWdlRWwiLCJwcmV2aWV3TW9kYWxDYXB0aW9uRWwiLCJjYXJkVGVtcGxhdGUiLCJjb250ZW50IiwiY2FyZHNMaXN0IiwiY2xvc2VPdmVybGF5IiwiZXZ0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJjbG9zZU1vZGFsIiwiaGFuZGxlRXNjIiwia2V5Iiwib3Blbk1vZGFsIiwibW9kYWwiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImdldENhcmRFbGVtZW50IiwiZGF0YSIsImNhcmRFbGVtZW50IiwiY2xvbmVOb2RlIiwiY2FyZFRpdGxlRWwiLCJjYXJkSW1hZ2VFbCIsImNhcmRMaWtlQnRuIiwiY2FyZERlbGV0ZSIsInRleHRDb250ZW50IiwibmFtZSIsInNyYyIsImxpbmsiLCJhbHQiLCJ0b2dnbGUiLCJ2YWx1ZSIsInJlc2V0VmFsaWRhdGlvbiIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYnV0dG9uIiwicG9wdXAiLCJjbG9zZXN0IiwicHJldmVudERlZmF1bHQiLCJjYXJkRWwiLCJwcmVwZW5kIiwicmVzZXQiLCJpdGVtIiwiYXBwZW5kIiwiZm9ybUVsIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJBcnJheSIsImZyb20iLCJpbnB1dEVsIiwiY2hlY2tJbnB1dFZhbGlkaXR5IiwiaGlkZUlucHV0RXJyb3IiLCJlcnJvckVsIiwiaWQiLCJzaG93SW5wdXRFcnJvciIsImVycm9yTXNnIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlbmFibGVWYWxpZGF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==